@tailwind base;
@tailwind components;
@tailwind utilities;

/* Theme variables */
:root {
  /* DARK THEME DEFAULTS */
  --bg: #0b1220;
  --text: #e2e8f0;
  --card: #0f172a;
  --muted: #94a3b8;

  /* Animated gradient colors (DARK: low opacity, cooler palette) */
  --grad-a: rgba(110, 64, 255, 0.25);
  --grad-b: rgba(77, 231, 226, 0.18);
  --grad-c: rgba(249, 203, 40, 0.12);
  --grad-d: rgba(255, 107, 107, 0.14);

  /* Grain overlay */
  --grain: url("data:image/svg+xml;utf8,\
<svg xmlns='http://www.w3.org/2000/svg' width='160' height='160' viewBox='0 0 160 160'>\
<filter id='n'><feTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4'/></filter>\
<rect width='100%' height='100%' filter='url(%23n)' opacity='.05'/></svg>");
}

/* LIGHT THEME OVERRIDES */
[data-theme="light"] {
  --bg: #f8fafc;
  --text: #0f172a;
  --card: #ffffff;
  --muted: #475569;

  /* LIGHT: higher opacity, warmer/brighter mix */
  --grad-a: rgba(110, 64, 255, 0.55);
  --grad-b: rgba(77, 231, 226, 0.45);
  --grad-c: rgba(249, 203, 40, 0.40);
  --grad-d: rgba(255, 107, 107, 0.42);
}

/* Gradient animation */
@keyframes bgShift {
  0% { background-position: 0% 50%, 100% 50%, 0% 0%; }
  50% { background-position: 100% 50%, 0% 50%, 100% 100%; }
  100% { background-position: 0% 50%, 100% 50%, 0% 0%; }
}

/* Base styles */
body {
  color: var(--text);
  background-color: var(--bg);
  background-image:
    radial-gradient(1200px 600px at 0% -20%, rgba(0,0,0,0.35), transparent 60%),
    radial-gradient(1200px 600px at 100% 120%, rgba(0,0,0,0.25), transparent 60%),
    linear-gradient(120deg, var(--grad-a), var(--grad-b), var(--grad-c), var(--grad-d)),
    var(--grain);
  background-size: 300% 300%, 300% 300%, 400% 400%, auto;
  background-blend-mode: multiply, multiply, normal, normal;
  animation: bgShift 40s ease infinite;
  min-height: 100dvh;
}

/* Light theme adjustments */
[data-theme="light"] body {
  background-image:
    radial-gradient(1200px 600px at 0% -20%, rgba(0,0,0,0.08), transparent 60%),
    radial-gradient(1200px 600px at 100% 120%, rgba(0,0,0,0.06), transparent 60%),
    linear-gradient(120deg, var(--grad-a), var(--grad-b), var(--grad-c), var(--grad-d)),
    var(--grain);
  background-blend-mode: normal, normal, normal, normal;
}

/* Card utility class */
.card {
  background-color: var(--card);
  border-radius: 0.75rem;
  padding: 1rem;
  box-shadow: 0 4px 6px rgba(0,0,0,0.1);
}

/* Table utility class */
.table {
  width: 100%;
  border-collapse: collapse;
}

.table th,
.table td {
  padding: 0.5rem;
  border-bottom: 1px solid var(--muted);
}

/* Button utility class */
.btn {
  background-color: var(--grad-a);
  color: var(--text);
  border: none;
  border-radius: 0.5rem;
  padding: 0.5rem 0.75rem;
  cursor: pointer;
  transition: background-color 0.2s ease;
}

.btn:hover {
  background-color: var(--grad-b);
}

/* Details toggle styling */
.details summary {
  list-style: none;
  cursor: pointer;
}

.details summary::-webkit-details-marker {
  display: none;
}

/* Respect reduced motion */
@media (prefers-reduced-motion: reduce) {
  body { animation: none; }
}
/* ===== layout fix ===== */
.container {
  max-width: 1100px;
  margin: 0 auto;     /* centers the page */
  padding: 1rem;
}

/* ===== leaderboard/table polish ===== */
.table { width: 100%; border-collapse: collapse; table-layout: fixed; }
.table th, .table td { padding: .75rem 1rem; border-bottom: 1px solid rgba(148,163,184,.15); }
.table th { font-weight: 600; }
.table th:nth-child(1), .table td:nth-child(1) { width: 48px; }      /* rank column */
.table th:nth-child(3), .table td:nth-child(3) { text-align: right; } /* score right aligned */

/* avatar + row alignment */
.row { display: flex; align-items: center; gap: .6rem; }
.avatar { width: 32px; height: 32px; border-radius: 999px; object-fit: cover; }

/* card should stretch nicely */
.card { width: 100%; border-radius: 18px; overflow: hidden; }

/* universal table fix */
.table { width:100%; border-collapse:collapse; table-layout:fixed; }
.table th, .table td { padding:.75rem 1rem; border-bottom:1px solid rgba(148,163,184,.15); vertical-align:middle; }

/* Leaderboard: [#, Player, Score] */
.table--lb th:nth-child(1), .table--lb td:nth-child(1){ width:56px; }
.table--lb th:nth-child(3), .table--lb td:nth-child(3){ width:120px; text-align:right; white-space:nowrap; }
.table--lb .row{ display:flex; align-items:center; gap:.6rem; }
.table--lb .avatar{ width:32px; height:32px; border-radius:999px; object-fit:cover; }

/* Shop: [Item, Price, Left, Buy] */
.table--shop th:nth-child(2), .table--shop td:nth-child(2){ width:110px; text-align:right; white-space:nowrap; }
.table--shop th:nth-child(3), .table--shop td:nth-child(3){ width:90px; text-align:right; white-space:nowrap; }
.table--shop th:nth-child(4), .table--shop td:nth-child(4){ width:110px; text-align:right; }
.table--shop td:nth-child(1){ overflow:hidden; text-overflow:ellipsis; }
.table--shop .btn{ padding:.35rem .7rem; }

/* Inventory: [Item, Qty, Expires, Actions] */
.table--inv th:nth-child(2), .table--inv td:nth-child(2){ width:80px; text-align:center; }
.table--inv th:nth-child(3), .table--inv td:nth-child(3){ width:160px; text-align:center; white-space:nowrap; }
.table--inv th:nth-child(4), .table--inv td:nth-child(4){ width:120px; text-align:right; }
.table--inv td:nth-child(1){ overflow:hidden; text-overflow:ellipsis; }
.table--inv .btn{ padding:.35rem .6rem; }

/* Global table styling for all pages */
.table th, 
.table td {
  white-space: nowrap;      /* Prevents text from wrapping */
  padding: 0.5rem 0.75rem;   /* Consistent padding */
}

.table th:nth-child(1), 
.table td:nth-child(1) {
  width: auto;
  min-width: 250px;         /* Enough room for long names */
}

.table th:nth-child(2), 
.table td:nth-child(2) {
  width: 80px;
  text-align: center;
}

.table th:nth-child(3), 
.table td:nth-child(3) {
  width: 160px;
  text-align: center;
}

.table th:nth-child(4), 
.table td:nth-child(4) {
  width: 150px;
  text-align: center;
}

.table th:nth-child(5), 
.table td:nth-child(5) {
  width: 90px;
  text-align: right;
}

.table .btn {
  padding: .35rem .6rem;
}


/* keep page centered */
.container{ max-width:1100px; margin:0 auto; padding:1rem; }


/* Inventory: [Item, Qty, Expires, Target, Delete] */
.table--inv th:nth-child(2), .table--inv td:nth-child(2){ width:80px; text-align:center; }
.table--inv th:nth-child(3), .table--inv td:nth-child(3){ width:160px; text-align:center; white-space:nowrap; }
.table--inv th:nth-child(4), .table--inv td:nth-child(4){ width:150px; text-align:center; }
.table--inv th:nth-child(5), .table--inv td:nth-child(5){ width:90px; text-align:right; }
.table--inv .btn{ padding:.35rem .6rem; }


/* ===== Mobile-friendly overrides ===== */
@media (max-width: 768px) {
  /* Layout */
  .container{ max-width:100%; padding: .75rem; }
  header nav{ flex-wrap: wrap; gap:.5rem; }
  .card{ overflow-x:auto; }            /* horizontal scroll for wide tables */

  /* Table readability: keep columns, allow side-scroll */
  .table{ font-size:.95rem; min-width: 640px; }  /* keeps structure; scrolls horizontally */
  .table th, .table td{ padding:.6rem .75rem; }

  /* Column sizing tweaks (applies to all tables) */
  .table th:nth-child(1), .table td:nth-child(1){ min-width: 200px; }
  .table th:nth-child(2), .table td:nth-child(2){ width:70px; }
  .table th:nth-child(3), .table td:nth-child(3){ width:140px; }
  .table th:nth-child(4), .table td:nth-child(4){ width:140px; }
  .table th:nth-child(5), .table td:nth-child(5){ width:80px; }

  /* Buttons/avatars = easier tap targets */
  .table .btn{ width:100%; padding:.5rem .7rem; }
  .avatar{ width:24px; height:24px; }

  /* Headings spacing */
  h1,h2{ line-height:1.2; }
}

/* Optional: slightly larger mobile breakpoint for very small phones */
@media (max-width: 420px) {
  .table{ min-width: 720px; }   /* force scroll instead of squishing */
}
/* Fix leaderboard # column width */
.table.leaderboard th:nth-child(1),
.table.leaderboard td:nth-child(1) {
  width: 40px;
  min-width: 40px;
  text-align: center;
}
.badges{ display:flex; gap:.4rem; align-items:center; }
.badge{ font-size:.75rem; padding:.2rem .5rem; border-radius:.5rem; background:rgba(148,163,184,.15); }
.badge-IMMUNE{ background:#10b98122; border:1px solid #10b98155; }
.badge-POISONED{ background:#ef444422; border:1px solid #ef444466; }
